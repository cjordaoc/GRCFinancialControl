<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:GRCFinancialControl.Avalonia.ViewModels"
             xmlns:loc="clr-namespace:App.Presentation.Localization;assembly=App.Presentation"
             mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="500"
             x:Class="GRCFinancialControl.Avalonia.Views.RankMappingsView"
             x:DataType="vm:RankMappingsViewModel">
    <Grid RowDefinitions="Auto,*,Auto" Margin="{StaticResource SpaceThickness20}">
        <TextBlock Grid.Row="0"
                   Text="{loc:Loc Key=MasterData.RankMappings.Title}"
                   Classes="TitleLarge"/>

        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding RankMappings}"
                  SelectedItem="{Binding SelectedRankMapping}"
                  SelectionMode="Single"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  Margin="{StaticResource MarginTopSmall}"
                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                  ScrollViewer.VerticalScrollBarVisibility="Auto">
            <DataGrid.Columns>
                <DataGridTextColumn Header="{loc:Loc Key=MasterData.RankMappings.Columns.RawRank}" Width="Auto" Binding="{Binding RawRank}"/>
                <DataGridTextColumn Header="{loc:Loc Key=MasterData.RankMappings.Columns.NormalizedRank}" Width="*" Binding="{Binding NormalizedRank}"/>
                <DataGridTextColumn Header="{loc:Loc Key=MasterData.RankMappings.Columns.SpreadsheetRank}" Width="*" Binding="{Binding SpreadsheetRank}"/>
                <DataGridCheckBoxColumn Header="{loc:Loc Key=MasterData.RankMappings.Columns.IsActive}" Width="Auto" Binding="{Binding IsActive}" IsThreeState="False"/>
                <DataGridTextColumn Header="{loc:Loc Key=MasterData.RankMappings.Columns.LastSeenAt}" Width="Auto">
                    <DataGridTextColumn.Binding>
                        <Binding Path="LastSeenAt"
                                 StringFormat="{}{0:yyyy-MM-dd HH:mm}"
                                 TargetNullValue=""/>
                    </DataGridTextColumn.Binding>
                </DataGridTextColumn>
                <DataGridTextColumn Header="{loc:Loc Key=MasterData.RankMappings.Columns.CreatedAt}" Width="Auto">
                    <DataGridTextColumn.Binding>
                        <Binding Path="CreatedAt"
                                 StringFormat="{}{0:yyyy-MM-dd HH:mm}"/>
                    </DataGridTextColumn.Binding>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    Spacing="{StaticResource Spacing12}"
                    Margin="{StaticResource MarginTopSmall}">
            <Button Content="{loc:Loc Key=Common.Button.Add}"
                    Command="{Binding AddCommand}"
                    MinWidth="120"/>
            <Button Content="{loc:Loc Key=Common.Button.Edit}"
                    Command="{Binding EditCommand}"
                    CommandParameter="{Binding SelectedRankMapping}"
                    MinWidth="120"/>
            <Button Content="{loc:Loc Key=Common.Button.Delete}"
                    Command="{Binding DeleteCommand}"
                    CommandParameter="{Binding SelectedRankMapping}"
                    Classes="danger"
                    MinWidth="120"/>
        </StackPanel>
    </Grid>
</UserControl>
